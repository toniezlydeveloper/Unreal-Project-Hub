<Window x:Class="UnrealProjectHub.MainWindow"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Unreal Project Hub"
		Icon="Assets/Icon.ico"
        Width="720" Height="420"
        Background="{StaticResource BgBrush}"
        FontFamily="Segoe UI">
	<Grid Margin="10">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
		</Grid.RowDefinitions>
		<TextBlock Grid.Row="0"
                   Text="Projects"
                   FontSize="13"
                   FontWeight="SemiBold"
                   Foreground="#E6E6E6"
                   Margin="2,0,0,6"/>
		<ScrollViewer Grid.Row="1"
                      VerticalScrollBarVisibility="Auto">
			<ItemsControl ItemsSource="{Binding Projects}">
				<ItemsControl.ItemTemplate>
					<DataTemplate>
						<Border Margin="0, 6"
                                Padding="12"
                                Background="#252526"
                                CornerRadius="6">
							<Grid>
								<Grid.RowDefinitions>
									<RowDefinition Height="Auto"/>
									<RowDefinition Height="Auto"/>
									<RowDefinition Height="Auto"/>
								</Grid.RowDefinitions>
								<Grid Grid.Row="0">
									<Grid.ColumnDefinitions>
										<ColumnDefinition Width="*"/>
										<ColumnDefinition Width="Auto"/>
									</Grid.ColumnDefinitions>
									<TextBlock Text="{Binding Name}"
                                               FontSize="14"
                                               FontWeight="SemiBold"
                                               Foreground="#E6E6E6"/>
									<Button Grid.Column="1"
                                            Content="✕"
                                            Foreground="#888"
                                            Background="Transparent"
                                            BorderThickness="0"
                                            Padding="4"
                                            Command="{Binding DataContext.RemoveProjectCommand,
                                                              RelativeSource={RelativeSource AncestorType=Window}}"
                                            CommandParameter="{Binding}"/>
								</Grid>
								<TextBlock Grid.Row="1"
                                           Text="{Binding UProjectPath}"
                                           FontSize="11"
                                           Foreground="#888"
                                           TextTrimming="CharacterEllipsis"
                                           Margin="0,4,0,8"/>
								<StackPanel Grid.Row="2">
									<UniformGrid Columns="3" Margin="0,0,0,6">
										<Button Content="Open UE"
                                                Style="{StaticResource SecondaryActionButton}"
                                                Margin="0,0,6,0"
                                                Command="{Binding DataContext.OpenUnrealEngineCommand,
                              RelativeSource={RelativeSource AncestorType=Window}}"
                                                CommandParameter="{Binding}"/>
										<Button Content="Open VS"
                                                Style="{StaticResource SecondaryActionButton}"
                                                Margin="0,0,6,0"
                                                Command="{Binding DataContext.OpenIdeCommand,
                              RelativeSource={RelativeSource AncestorType=Window}}"
                                                CommandParameter="{Binding}"/>
										<Button Content="Open In Explorer"
                                                Style="{StaticResource SecondaryActionButton}"
                                                Command="{Binding DataContext.OpenInExplorerCommand,
                              RelativeSource={RelativeSource AncestorType=Window}}"
                                                CommandParameter="{Binding}"/>
									</UniformGrid>
									<Button Content="Clean • Regenerate • Launch"
                                            Style="{StaticResource PrimaryActionButton}"
                                            Command="{Binding DataContext.CleanAndLaunchCommand,
                              RelativeSource={RelativeSource AncestorType=Window}}"
                                            CommandParameter="{Binding}"/>
								</StackPanel>
							</Grid>
						</Border>
					</DataTemplate>
				</ItemsControl.ItemTemplate>
			</ItemsControl>
		</ScrollViewer>
		<Button Grid.Row="2"
                Content="+ Add Project"
                Height="34"
                FontSize="13"
                Margin="0,8, 0, 16"
                HorizontalAlignment="Stretch"
                Command="{Binding AddProjectCommand}"/>
		<Grid Grid.Row="3">
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto"/>
				<RowDefinition Height="*"/>
			</Grid.RowDefinitions>
			<TextBlock Text="Logs"
                       FontSize="12"
                       FontWeight="SemiBold"
                       Foreground="#AAA"
                       Margin="2,0,0,4"/>
			<Border Grid.Row="1"
                    Background="#111"
                    BorderBrush="#333"
                    BorderThickness="1"
                    CornerRadius="4">
				<ScrollViewer VerticalScrollBarVisibility="Auto">
					<ItemsControl ItemsSource="{Binding Logs}">
						<ItemsControl.ItemTemplate>
							<DataTemplate>
								<TextBlock Text="{Binding}"
                                           FontFamily="Consolas"
                                           FontSize="12"
                                           Foreground="#D4D4D4"
                                           Margin="4,2"/>
							</DataTemplate>
						</ItemsControl.ItemTemplate>
					</ItemsControl>
				</ScrollViewer>
			</Border>
		</Grid>
	</Grid>
</Window>
